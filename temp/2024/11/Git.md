# Git 環境構築

【Windows】Git の環境構築をしよう！
この記事では、Windows で Git を使うための環境構築方法を説明します。
記事を読みながら実際に手を動かして、ローカル環境に Git の環境を準備していきましょう！
◯ 必要なもの・知識
Windows が搭載された PC
テキストエディタ
(HTML & CSS の開発環境を用意しよう！ を参考にしてください。)
Git の基礎的な知識 　（Progate Git 学習コース Ⅰ をクリアしていれば十分です）
CommandLine の基礎的な知識 　（Progate CommandLine 学習コース Ⅰ をクリアしていれば十分です）
◯ インストールするバージョン
Git 2.36.1（2022/6 時点の最新版）
この記事でインストールするバージョンは、Progate の演習で使っているバージョンと異なる場合がありますので、ご了承ください。
この記事は Windows をご利用の方向けの記事です。macOS をご利用の方はこちらの記事をご利用ください。

1. Git のインストール
   まずは、以下のサイトから Git をダウンロードしましょう。
   https://git-for-windows.github.io/

git for windows の画面
ダウンロード完了後、ファイルを展開するとインストール画面が出てきますので、以下の手順でインストールしていきましょう。
内容に同意したら、Next をクリックしてください。
内容に同意したら、Next をクリック
Next をクリックしてください。
Next をクリック
Next をクリックしてください。
Next をクリック
Next をクリックしてください。
Next をクリック
エディタの設定をします。使用するエディタの設定を選んで Next をクリックしてください。
(下の画像は VSCode の例です)
使用するエディタの設定を選んで Next をクリック
Override the default branch name for new repositories にチェックを入れて Next をクリックしてください。
Override the default branch name for new repositories にチェックを入れて Next をクリック
Git from the command line and also from 3rd-party software にチェックを入れて Next をクリックしてください。
Git from the command line and also from 3rd-party software にチェックを入れて Next をクリック
Use bundled OpenSSL にチェックを入れて Next をクリックしてください。
Use bundled OpenSSL にチェックを入れて Next をクリック
Use the OpenSSL library にチェックを入れて Next をクリックしてください。
Use the OpenSSL library にチェックを入れて Next をクリック
Checkout Windows-style, commit Unix-style line endings にチェックを入れて Next をクリックしてください。
Checkout Windows-style, commit Unix-style line endings にチェックを入れて Next をクリック
Use MinTTY (the default terminal of MSYS2)にチェックを入れて、Next をクリックしてください。
Use MinTTY (the default terminal of MSYS2)にチェックを入れて、Next をクリック
Default (fast-forward or merge)にチェックを入れて、Next をクリックしてください。
Default (fast-forward or merge)にチェックを入れて、Next をクリック
Git Credential Manager にチェックを入れて、Next をクリックしてください。
Git Credential Manager にチェックを入れて、Next をクリック
両方にチェックを入れて、Next をクリックしてください。
両方にチェックを入れて、Next をクリック
Install をクリックしてください。
Install をクリック
これで、Git のインストールが完了します。
Finish をクリックして、終了です。
Finish をクリックで終了
PC に「Git Bash（以下のアイコン）」というアプリがインストールされているはずですので、これからの作業は Git Bash を使用してください！
Git Bash がインストールされている 2. Git の初期設定
まずは、Git Bash を起動してください。
Git Bash を起動する
起動すると、このような画面になります。
Git Bash を起動した画面
では、Git Bash を使用して初期設定を行なっていきましょう。
ユーザー名とメールアドレスを設定する
Git にユーザー名とメールアドレスを設定することで、コミットしたときに誰が行なったコミットかを記録することができます。
（ユーザー名、メールアドレスは自分で自由に決めてください。）
git config --global user.name "ユーザー名"
git config --global user.email "メールアドレス"
以下は例です。

Git の初期設定をする
ユーザー名とメールアドレスが設定できているか確認をしてみましょう。 以下のコマンドを実行すると、設定したユーザー名とメールアドレスを確認することができます。
git config user.name
git config user.email

設定したユーザー名とメールアドレスを確認する
設定した情報が確認できたら、初期設定は完了です！ 3. GitHub の設定
ここからは、GitHub というサービスを利用して、リモートリポジトリを作成する方法を見ていきましょう。
「Git コース Ⅰ」で「ひつじ仙人」が用意していたリモートリポジトリを自分で作成していきます。
尚、これから紹介する GitHub の見た目は変更されている可能性がありますが、行う操作に変わりはありません。
GitHub アカウントの作成
GitHub を利用するために、アカウントを作成しましょう。
以下のリンクから GitHub にアクセスしてください。
GitHub

アクセスしたときの画面
「Sign up for GitHub」ボタンを押して、アカウント登録画面を表示してください。
新規登録フォームにユーザ名、メールアドレス、パスワードを入力して、GitHub のアップデートやお知らせを受け取るかどうかに「yes」か「no」で答えましょう。 また登録者がロボットではないことを確認する質問がありますので、質問の通りに回答してください。

新規登録画面
ユーザー名、メールアドレス、パスワードを登録すると、登録したメールアドレスに数字が書かれたメールが届きます。メールに書かれた数字を画面に入力すると、先に進むことができます。

コード入力画面
いくつかの質問があるので回答しましょう。

質問画面１

質問画面２
いくつかの質問に回答すると、プラン選択に移ります。 無料で使う場合は、「Continue for free」を選択してください。

プラン選択画面
これでアカウントの作成は完了です。
リモートリポジトリの作成
リモートリポジトリを作成するには、GitHub のヘッダー右上にある「+」をクリックして表示される項目の「New repository」をクリックします。

新規リモートリポジトリの作成
「Repository name」の箇所にプロジェクト名を入力しましょう。また今回のリポジトリは自分だけの練習用なので、公開範囲を「Private」に設定します。「Create repository」を押すと、リモートリポジトリを作成することができます。

新規リモートリポジトリの詳細を入力
リモートリポジトリの作成が完了すると、以下の画像のページに移ります。

リモートリポジトリが作成される 4. GitHub に SSH の設定をする
GitHub で作成したリモートリポジトリと自分の PC の Git を連携できるように接続設定をします。 Git Bash を開いて以下の手順を実行していきましょう。
新しい SSH キーを生成する
まずはすでに接続に必要なファイルがあるかを確認しましょう。
ls ~/.ssh
すでに以下のようなファイルが表示された場合は、手順「SSH キーを ssh-agent に追加する」に進んでください。

ファイルの確認
以下のように表示された場合や上記の id\_〇〇.pub というファイルが１つも表示されない場合は、このまま手順を進めてください。

ファイルが１つも表示されない時の結果
SSH で接続するのに必要な SSH キーというものを作成していきましょう。 以下のコマンドを実行すると、SSH キーを生成することができます。
ssh-keygen -t ed25519 -C "GitHub に登録したメールアドレス"
「Enter a file in which to save the key」というメッセージが表示されたら、Enter キーを押します。 これにより、デフォルトのファイル場所が受け入れられます。 さらにその後にパスワードの設定を求められるので、入力して Enter キーを押してください。確認のため、もう一度同じパスワードの入力をしてください。

SSH キーの作成
作成できたことを確認するために、以下のコマンドを実行しましょう。
ls ~/.ssh

ファイルの確認
GitHub アカウントへ SSH キーを追加する
作成した SSH キーを GitHub アカウントに追加していきましょう。
id_ed25519.pub ファイルに書かれた内容をコピーします。 以下のコマンドを実行することでコピーすることができます。 コマンドに書かれている SSH キーファイルの名前またはパスが異なる場合は、ファイル名またはパスを変更してください。
clip < ~/.ssh/id_ed25519.pub

ファイルに書かれた内容をコピー
GitHub のヘッダー右上にあるプロフィール画像を押して、その中の「Settings（設定）」を押してください。

Settings（設定）をクリック
左側のサイドメニューから、「SSH and GPG keys.」を押してください。 次に「New SSH Key」を押してください。

New SSH Key をクリック
Title 欄に任意の名前をつけてください。 Key 欄に先ほどコピーした内容を貼り付けてください。 コピーができていない場合は、１つ手順を戻ってもう一度戻って実行してください。

SSH 作成画面
貼り付けることができたら、「Add SSH Key」を押してください。GitHub パスワードの確認を促された場合は、入力してください。
これで GitHub での設定が完了です。
SSH 接続を確認する
GitHub に接続ができるか確認をしてみましょう。 以下のコマンドを実行すると、GitHub に SSH を利用して接続ができるかの確認をすることができます。
ssh -T git@github.com
実行するとパスワードを聞かれるので、パスワードを入力してください。 以下のような出力メッセージが出た場合は、yes と入力して Enter キーを押してください。

接続の確認
あなたのユーザー名が表示されたら接続完了です。 5. GitHub にプッシュする
GitHub で作成したリモートリポジトリにプッシュしてみましょう。
Git を使う準備をする
まずはターミナルを開いて、Git で管理するディレクトリを作成し、移動しましょう。
mkdir mysite
cd mysite

フォルダ作成の確認
そのフォルダを Git で管理できるように、以下のコマンドを実行します。
git init

git init の実行結果
自分の PC でファイルを作成することができたら、GitHub の作成したリポジトリ画面を開いてください。 「HTTPS/SSH」と書かれたボタンの「SSH」を押してください。 git@github.comから始まる 1 行をコピーしてください。 (下の画像の右にあるボタンをクリックすると簡単にコピーできます。)

コピーする
コピーできたら、以下の<URL> の部分をコピーしたものに置き換えて、Git Bash で実行してください。 以下のコマンドを実行すると、プッシュ先のリモートリポジトリを指定することができます。
git remote add origin <URL>
このコマンドは、プッシュ先のリモートリポジトリを指定するコマンドです。

リモートリポジトリを設定する
リモートリポジトリが登録できたか確認してみましょう。 以下コマンドを実行すると、登録されているリモートリポジトリを確認することができます。
git remote -v

リモートリポジトリの確認
リモートリポジトリの URL が表示されたら OK です。
プッシュする
次に、プッシュするためにファイルを作成してコミットしましょう。
touch index.html
git add index.html
git commit -m "Create index.html"

コミットした結果
ここまでできたらプッシュします。
git push origin main

プッシュした結果
プッシュできているかを GitHub で確認してみましょう。
プッシュができていれば GitHub 上に index.html が作成されているはずです。

プッシュできているか確認する 6. パスワードの確認を省略しよう
これまでの設定では、プッシュなどで SSH を利用するたびにパスワードを入力する必要があります。これから説明する設定を追加すれば、GitBash 起動時にパスワードを入力するのみに省略することができます。 少し設定が難しいですが、パスワードを省略したい方はぜひ挑戦してみましょう。
.bashrc ファイルを用意する
「.bashrc」という名前の設定ファイルを用意すると、その中に書かれている設定が GitBash の起動時に読み込まれます。 まずは.bashrc ファイルがすでにあるかどうかの確認をしましょう。以下のコマンドを使ってファイルの内容を出力してみます。
cat ~/.bashrc
No such file or directory と表示されたら、まだファイルがないので作成していきましょう。 すでにファイルがある場合は、「エディタで.bashrc ファイルを開く」手順まで進んでください。
ファイルがない場合の結果
以下のコマンドを実行してファイルを作成してください。
touch ~/.bashrc

.bashrc ファイルの作成
作成できたら、エディタで.bashrc を開いてください。
作成された.bashrc ファイル
以下のコードを.bashrc ファイルに貼り付けて、保存してくださいを開いてください。 このコードを.bashrc ファイルに追加することで、GitBash 起動時に ssh を接続するための設定を実施してくれます。
env=~/.ssh/agent.env

agent_load_env () { test -f "$env" && . "$env" >| /dev/null ; }

agent_start () {
(umask 077; ssh-agent >| "$env")
    . "$env" >| /dev/null ; }

agent_load_env

# agent_run_state: 0=agent running w/ key; 1=agent w/o key; 2=agent not running

agent_run_state=$(ssh-add -l >| /dev/null 2>&1; echo $?)

if [ ! "$SSH_AUTH_SOCK" ] || [ $agent_run_state = 2 ]; then
agent_start
ssh-add
elif [ "$SSH_AUTH_SOCK" ] && [ $agent_run_state = 1 ]; then
ssh-add
fi

unset env

コードを貼りつける
保存することができたら、GitBash を起動してみましょう。 もし以下のようなメッセージが出た場合は、必要なファイルを作成したという内容なので、GitBash を閉じて再び起動し直してください。
WARNING の表示
うまくいくと、起動した直後にパスワードの入力が求められます。パスワードを入力すると GitBash を使うことができるようになります。

パスワードの入力が求められる
これで設定は完了です。 7. うまくいかない時のチェックリスト
うまくいかない場合は、以下のような間違いがないかチェックしてみましょう。
記事で指定したコードが貼り付けられていない
入力したファイル名やソースコードなどに誤字脱字がある
ファイルが保存されていない
記事で指定している箇所にフォルダが配置されていない
コマンドの内容や実行している場所が違う
